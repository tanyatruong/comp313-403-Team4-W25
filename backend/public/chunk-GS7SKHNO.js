import{a as Y}from"./chunk-67QVLPMA.js";import{n as q}from"./chunk-XNOVGIWT.js";import{b as L,c as A,e as D}from"./chunk-YCHOBINP.js";import{A as f,K as O,M as a,N as x,Sa as k,Ua as U,W as P,Y as u,Ya as I,_ as v,ba as e,ca as t,da as l,ha as y,ia as p,ja as m,kb as T,mb as z,nb as N,ob as V,pb as F,qa as w,qb as W,ra as r,rb as R,sa as h,sb as j,ta as S,v as M,va as _,wa as b,xa as C,xb as B,z as g,za as E}from"./chunk-6TMHBXNU.js";function G(s,c){if(s&1&&(e(0,"div",21),l(1,"i",22),e(2,"span"),r(3),t()()),s&2){let o=m();a(3),h(o.errorMessage)}}function J(s,c){s&1&&(e(0,"div",23)(1,"div",24),l(2,"i",25),t(),e(3,"p"),r(4,"Loading profile information..."),t()())}function K(s,c){if(s&1){let o=y();e(0,"div",26)(1,"div",27)(2,"div",28)(3,"div",29),l(4,"i",30),t(),e(5,"div",31)(6,"h3"),r(7),t(),e(8,"span",32),r(9),t(),e(10,"span",33),r(11),t()()()(),e(12,"form",34,0),p("ngSubmit",function(){g(o);let i=m();return f(i.saveUser())}),e(14,"div",35)(15,"h4"),r(16,"Personal Information"),t(),e(17,"div",36)(18,"div",37)(19,"label",38),l(20,"i",30),r(21," Full Name "),t(),e(22,"input",39),C("ngModelChange",function(i){g(o);let d=m();return b(d.user.name,i)||(d.user.name=i),f(i)}),t()(),e(23,"div",37)(24,"label",40),l(25,"i",41),r(26," Email Address "),t(),e(27,"input",42),C("ngModelChange",function(i){g(o);let d=m();return b(d.user.email,i)||(d.user.email=i),f(i)}),t()(),e(28,"div",37)(29,"label",43),l(30,"i",44),r(31," Phone Number "),t(),e(32,"input",45),C("ngModelChange",function(i){g(o);let d=m();return b(d.user.phone,i)||(d.user.phone=i),f(i)}),t()()()(),e(33,"div",46)(34,"button",47),p("click",function(){g(o);let i=m();return f(i.cancel())}),l(35,"i",17),r(36," Cancel "),t(),e(37,"button",48),l(38,"i",49),r(39," Save Changes "),t()()()()}if(s&2){let o=w(13),n=m();a(7),h(n.user.name),a(),u("ngClass","role-"+(n.user.role||"employee").toLowerCase()),a(),S(" ",n.user.role||"Employee"," "),a(2),h(n.user.employeeNumber),a(11),_("ngModel",n.user.name),a(5),_("ngModel",n.user.email),a(5),_("ngModel",n.user.phone),a(5),u("disabled",!o.valid)}}var H=class s{constructor(c,o){this.userService=c;this.routerService=o}user=null;statusOptions=L;priorityOptions=A;categoryOptions=D;errorMessage="";showChatbot=!1;ngOnInit(){this.user=this.userService.getLoggedInUser(),this.user||(this.errorMessage="No user selected for editing",setTimeout(()=>this.routerService.navigateToHome(),2e3))}saveUser(){if(!this.user){this.errorMessage="No user to save";return}this.userService.updateUser(this.user._id,this.user).subscribe(c=>{console.log("User updated successfully",c),this.routerService.navigateToHome()},c=>{console.error("Error updating user:",c),this.errorMessage="Failed to update user"})}cancel(){this.routerService.navigateToHome()}static \u0275fac=function(o){return new(o||s)(x(Y),x(B))};static \u0275cmp=M({type:s,selectors:[["app-user-edit"]],standalone:!0,features:[E],decls:28,vars:7,consts:[["userForm","ngForm"],[1,"profile-container"],[1,"profile-header"],[1,"header-content"],[1,"header-left"],[1,"back-btn",3,"click"],[1,"pi","pi-arrow-left"],[1,"header-title"],[1,"profile-main"],["class","error-alert",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","profile-card",4,"ngIf"],[1,"chat-toggle",3,"click"],[1,"pi","pi-comments"],[1,"chat-panel"],[1,"chat-header"],[1,"chat-close",3,"click"],[1,"pi","pi-times"],[1,"chat-content"],["width","100%","height","100%","allow","microphone *","src",O`https://www.gptbots.ai/widget/eeq5jnc8zz3glsfgnw7t8mq/chat.html`,"frameborder","0"],[1,"chat-overlay",3,"click"],[1,"error-alert"],[1,"pi","pi-exclamation-triangle"],[1,"loading-state"],[1,"loading-spinner"],[1,"pi","pi-spin","pi-spinner"],[1,"profile-card"],[1,"profile-avatar-section"],[1,"avatar-container"],[1,"avatar"],[1,"pi","pi-user"],[1,"avatar-info"],[1,"role-badge",3,"ngClass"],[1,"employee-number"],[1,"profile-form",3,"ngSubmit"],[1,"form-section"],[1,"form-grid"],[1,"form-group"],["for","name"],["id","name","type","text","name","name","required","","placeholder","Enter your full name",1,"form-input",3,"ngModelChange","ngModel"],["for","email"],[1,"pi","pi-envelope"],["id","email","type","email","name","email","required","","placeholder","Enter your email address",1,"form-input",3,"ngModelChange","ngModel"],["for","phone"],[1,"pi","pi-phone"],["id","phone","type","tel","name","phone","required","","placeholder","Enter your phone number",1,"form-input",3,"ngModelChange","ngModel"],[1,"form-actions"],["type","button",1,"action-btn","secondary",3,"click"],["type","submit",1,"action-btn","primary",3,"disabled"],[1,"pi","pi-check"]],template:function(o,n){o&1&&(e(0,"div",1)(1,"header",2)(2,"div",3)(3,"div",4)(4,"button",5),p("click",function(){return n.cancel()}),l(5,"i",6),t(),e(6,"div",7)(7,"h1"),r(8,"Profile Settings"),t(),e(9,"span"),r(10,"Manage your account information"),t()()()()(),e(11,"main",8),P(12,G,4,1,"div",9)(13,J,5,0,"div",10)(14,K,40,8,"div",11),t(),e(15,"button",12),p("click",function(){return n.showChatbot=!n.showChatbot}),l(16,"i",13),e(17,"span"),r(18,"Support"),t()(),e(19,"div",14)(20,"div",15)(21,"span"),r(22,"Support Chat"),t(),e(23,"button",16),p("click",function(){return n.showChatbot=!1}),l(24,"i",17),t()(),e(25,"div",18),l(26,"iframe",19),t()(),e(27,"div",20),p("click",function(){return n.showChatbot=!1}),t()()),o&2&&(a(12),u("ngIf",n.errorMessage),a(),u("ngIf",!n.user),a(),u("ngIf",n.user),a(5),v("open",n.showChatbot),a(8),v("active",n.showChatbot))},dependencies:[I,k,U,j,W,T,z,N,R,F,V,q],styles:["[_nghost-%COMP%]{display:block;min-height:100vh;background:linear-gradient(135deg,#f5f7fa,#c3cfe2)}.profile-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column}.profile-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1rem 2rem;box-shadow:0 4px 6px #0000001a}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;max-width:1200px;margin:0 auto}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.back-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;cursor:pointer;padding:.75rem;border-radius:50%;transition:background .3s ease}.back-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a}.header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;font-weight:700}.header-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;opacity:.8}.profile-main[_ngcontent-%COMP%]{flex:1;padding:2rem;max-width:800px;margin:0 auto;width:100%}.error-alert[_ngcontent-%COMP%]{background:#ef44441a;color:#dc2626;padding:1rem;border-radius:8px;border:1px solid rgba(239,68,68,.2);margin-bottom:2rem;display:flex;align-items:center;gap:.5rem}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem}.loading-spinner[_ngcontent-%COMP%]{font-size:3rem;color:#667eea;margin-bottom:1rem}.profile-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;box-shadow:0 8px 25px #0000001a}.profile-avatar-section[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem;padding-bottom:2rem;border-bottom:1px solid #e5e7eb}.avatar-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem}.avatar[_ngcontent-%COMP%]{width:80px;height:80px;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:50%;display:flex;align-items:center;justify-content:center;color:#fff;font-size:2rem;box-shadow:0 4px 12px #667eea4d}.avatar-info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#1f2937;font-size:1.5rem;font-weight:700}.role-badge[_ngcontent-%COMP%]{padding:.3rem .75rem;border-radius:20px;font-size:.8rem;font-weight:600;text-transform:uppercase;margin:.5rem 0;display:inline-block}.role-badge.role-hr[_ngcontent-%COMP%]{background:#8b5cf61a;color:#8b5cf6}.role-badge.role-employee[_ngcontent-%COMP%]{background:#3b82f61a;color:#3b82f6}.employee-number[_ngcontent-%COMP%]{color:#9ca3af;font-size:.9rem;display:block}.profile-form[_ngcontent-%COMP%]{margin-top:1rem}.form-section[_ngcontent-%COMP%]{margin-bottom:2rem}.form-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 1.5rem;color:#374151;font-size:1.2rem;font-weight:600}.form-grid[_ngcontent-%COMP%]{display:grid;gap:1.5rem}.form-group[_ngcontent-%COMP%]{display:flex;flex-direction:column}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-weight:600;color:#374151;margin-bottom:.5rem;font-size:.9rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.form-input[_ngcontent-%COMP%]{padding:.875rem 1rem;border:2px solid #e5e7eb;border-radius:8px;font-size:1rem;transition:all .3s ease;background:#fff}.form-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:2rem;padding-top:2rem;border-top:1px solid #e5e7eb}.action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.875rem 1.5rem;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease;font-size:.9rem}.action-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.action-btn.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.action-btn.primary[_ngcontent-%COMP%]:hover{box-shadow:0 8px 25px #667eea4d}.action-btn.primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;background:#9ca3af;transform:none}.action-btn.secondary[_ngcontent-%COMP%]{background:#6b7280;color:#fff}.chat-toggle[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:2rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:1rem 1.5rem;border-radius:50px;box-shadow:0 4px 12px #0003;cursor:pointer;transition:all .3s ease;z-index:1000;display:flex;align-items:center;gap:.5rem;font-weight:600}.chat-toggle[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.chat-panel[_ngcontent-%COMP%]{position:fixed;top:0;right:0;width:400px;height:100vh;background:#fff;box-shadow:-4px 0 20px #00000026;transform:translate(100%);transition:transform .3s ease;z-index:1001;display:flex;flex-direction:column}.chat-panel.open[_ngcontent-%COMP%]{transform:translate(0)}.chat-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1rem 1.5rem;display:flex;justify-content:space-between;align-items:center;font-weight:600}.chat-close[_ngcontent-%COMP%]{background:none;border:none;color:#fff;cursor:pointer;padding:.5rem;border-radius:50%}.chat-content[_ngcontent-%COMP%]{flex:1}.chat-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;opacity:0;visibility:hidden;transition:all .3s ease;z-index:1000}.chat-overlay.active[_ngcontent-%COMP%]{opacity:1;visibility:visible}@media (max-width: 768px){.profile-main[_ngcontent-%COMP%]{padding:1rem}.profile-card[_ngcontent-%COMP%]{padding:1.5rem;border-radius:12px}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.action-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.avatar[_ngcontent-%COMP%]{width:60px;height:60px;font-size:1.5rem}.chat-panel[_ngcontent-%COMP%]{width:100%}.chat-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}@media (max-width: 480px){.profile-avatar-section[_ngcontent-%COMP%]{margin-bottom:1.5rem;padding-bottom:1.5rem}.form-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.1rem}.avatar-container[_ngcontent-%COMP%]{flex-direction:column}}"]})};export{H as UserEditComponent};
