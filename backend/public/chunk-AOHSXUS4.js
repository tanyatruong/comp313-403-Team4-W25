import{a as Y}from"./chunk-GXMPX4TZ.js";import{k as R,n as D}from"./chunk-SXJIQHAC.js";import{b as L,c as j,e as B}from"./chunk-YCHOBINP.js";import{A as g,K as M,M as d,N as k,Ua as S,W as y,Y as f,Ya as T,_ as b,ba as e,ca as n,da as c,ha as w,ia as _,ja as s,kb as E,mb as I,nb as V,ob as W,pb as z,qa as v,qb as N,ra as o,rb as q,sa as O,sb as F,v as x,va as u,wa as h,xa as C,xb as A,z as p,za as P}from"./chunk-F4GXBDNV.js";function U(l,m){if(l&1&&(e(0,"div",21),c(1,"i",22),e(2,"span"),o(3),n()()),l&2){let r=s();d(3),O(r.errorMessage)}}function G(l,m){l&1&&(e(0,"div",23)(1,"div",24),c(2,"i",25),n(),e(3,"p"),o(4,"Loading ticket details..."),n()())}function J(l,m){if(l&1){let r=w();e(0,"div",26)(1,"form",27,0),_("ngSubmit",function(){p(r);let t=s();return g(t.saveTicket())}),e(3,"div",28)(4,"h3"),o(5,"Ticket Information"),n(),e(6,"div",29)(7,"label",30),c(8,"i",31),o(9," Title "),e(10,"span",32),o(11,"*"),n()(),e(12,"input",33),C("ngModelChange",function(t){p(r);let a=s();return h(a.ticket.title,t)||(a.ticket.title=t),g(t)}),n()(),e(13,"div",29)(14,"label",34),c(15,"i",35),o(16," Description "),e(17,"span",32),o(18,"*"),n()(),e(19,"textarea",36),C("ngModelChange",function(t){p(r);let a=s();return h(a.ticket.description,t)||(a.ticket.description=t),g(t)}),n()(),e(20,"div",37)(21,"div",29)(22,"label",38),c(23,"i",39),o(24," Status "),e(25,"span",32),o(26,"*"),n()(),e(27,"p-dropdown",40),C("ngModelChange",function(t){p(r);let a=s();return h(a.ticket.status,t)||(a.ticket.status=t),g(t)}),n()(),e(28,"div",29)(29,"label",41),c(30,"i",22),o(31," Priority "),e(32,"span",32),o(33,"*"),n()(),e(34,"p-dropdown",42),C("ngModelChange",function(t){p(r);let a=s();return h(a.ticket.priority,t)||(a.ticket.priority=t),g(t)}),n()(),e(35,"div",29)(36,"label",43),c(37,"i",44),o(38," Category "),e(39,"span",32),o(40,"*"),n()(),e(41,"p-dropdown",45),C("ngModelChange",function(t){p(r);let a=s();return h(a.ticket.category,t)||(a.ticket.category=t),g(t)}),n()()()(),e(42,"div",46)(43,"button",47),_("click",function(){p(r);let t=s();return g(t.cancel())}),c(44,"i",17),o(45," Cancel "),n(),e(46,"button",48),c(47,"i",49),o(48," Save Changes "),n()()()()}if(l&2){let r=v(2),i=s();d(12),u("ngModel",i.ticket.title),d(7),u("ngModel",i.ticket.description),d(8),f("options",i.statusOptions),u("ngModel",i.ticket.status),d(7),f("options",i.priorityOptions),u("ngModel",i.ticket.priority),d(7),f("options",i.categoryOptions),u("ngModel",i.ticket.category),d(5),f("disabled",!r.valid)}}var H=class l{constructor(m,r){this.ticketService=m;this.routerService=r}ticket=null;statusOptions=L;priorityOptions=j;categoryOptions=B;errorMessage="";showChatbot=!1;ngOnInit(){this.ticket=this.ticketService.currentTicket,this.ticket||(this.errorMessage="No ticket selected for editing",setTimeout(()=>this.routerService.navigateToHome(),2e3))}saveTicket(){if(!this.ticket){this.errorMessage="No ticket to save";return}this.ticketService.updateTicket(this.ticket.id,this.ticket).subscribe(m=>{console.log("Ticket updated successfully",m),this.routerService.navigateToHome()},m=>{console.error("Error updating ticket:",m),this.errorMessage="Failed to update ticket"})}cancel(){this.routerService.navigateToHome()}static \u0275fac=function(r){return new(r||l)(k(Y),k(A))};static \u0275cmp=x({type:l,selectors:[["app-ticket-edit"]],standalone:!0,features:[P],decls:28,vars:7,consts:[["ticketForm","ngForm"],[1,"ticket-edit-container"],[1,"ticket-edit-header"],[1,"header-content"],[1,"header-left"],[1,"back-btn",3,"click"],[1,"pi","pi-arrow-left"],[1,"header-title"],[1,"ticket-edit-main"],["class","error-alert",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","ticket-form-card",4,"ngIf"],[1,"chat-toggle",3,"click"],[1,"pi","pi-comments"],[1,"chat-panel"],[1,"chat-header"],[1,"chat-close",3,"click"],[1,"pi","pi-times"],[1,"chat-content"],["width","100%","height","100%","allow","microphone *","src",M`https://www.gptbots.ai/widget/eeq5jnc8zz3glsfgnw7t8mq/chat.html`,"frameborder","0"],[1,"chat-overlay",3,"click"],[1,"error-alert"],[1,"pi","pi-exclamation-triangle"],[1,"loading-state"],[1,"loading-spinner"],[1,"pi","pi-spin","pi-spinner"],[1,"ticket-form-card"],[1,"ticket-form",3,"ngSubmit"],[1,"form-section"],[1,"form-group"],["for","title"],[1,"pi","pi-bookmark"],[1,"required"],["id","title","type","text","name","title","required","","placeholder","Enter ticket title",1,"form-input",3,"ngModelChange","ngModel"],["for","description"],[1,"pi","pi-file-edit"],["id","description","name","description","required","","rows","5","placeholder","Describe the issue in detail",1,"form-textarea",3,"ngModelChange","ngModel"],[1,"form-grid"],["for","status"],[1,"pi","pi-sync"],["id","status","optionLabel","label","optionValue","value","name","status","required","",1,"form-dropdown",3,"ngModelChange","options","ngModel"],["for","priority"],["id","priority","name","priority","required","",1,"form-dropdown",3,"ngModelChange","options","ngModel"],["for","category"],[1,"pi","pi-tag"],["id","category","name","category","required","",1,"form-dropdown",3,"ngModelChange","options","ngModel"],[1,"form-actions"],["type","button",1,"action-btn","secondary",3,"click"],["type","submit",1,"action-btn","primary",3,"disabled"],[1,"pi","pi-check"]],template:function(r,i){r&1&&(e(0,"div",1)(1,"header",2)(2,"div",3)(3,"div",4)(4,"button",5),_("click",function(){return i.cancel()}),c(5,"i",6),n(),e(6,"div",7)(7,"h1"),o(8,"Edit Ticket"),n(),e(9,"span"),o(10,"Update ticket details and status"),n()()()()(),e(11,"main",8),y(12,U,4,1,"div",9)(13,G,5,0,"div",10)(14,J,49,9,"div",11),n(),e(15,"button",12),_("click",function(){return i.showChatbot=!i.showChatbot}),c(16,"i",13),e(17,"span"),o(18,"Support"),n()(),e(19,"div",14)(20,"div",15)(21,"span"),o(22,"Support Chat"),n(),e(23,"button",16),_("click",function(){return i.showChatbot=!1}),c(24,"i",17),n()(),e(25,"div",18),c(26,"iframe",19),n()(),e(27,"div",20),_("click",function(){return i.showChatbot=!1}),n()()),r&2&&(d(12),f("ngIf",i.errorMessage),d(),f("ngIf",!i.ticket),d(),f("ngIf",i.ticket),d(5),b("open",i.showChatbot),d(8),b("active",i.showChatbot))},dependencies:[T,S,F,N,E,I,V,q,z,W,D,R],styles:['[_nghost-%COMP%]{display:block;min-height:100vh;background:linear-gradient(135deg,#f5f7fa,#c3cfe2)}.ticket-edit-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column}.ticket-edit-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1rem 2rem;box-shadow:0 4px 6px #0000001a}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;max-width:1200px;margin:0 auto}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.back-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;cursor:pointer;padding:.75rem;border-radius:50%;transition:background .3s ease}.back-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a}.header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;font-weight:700}.header-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;opacity:.8}.ticket-edit-main[_ngcontent-%COMP%]{flex:1;padding:2rem;max-width:900px;margin:0 auto;width:100%}.error-alert[_ngcontent-%COMP%]{background:#ef44441a;color:#dc2626;padding:1rem;border-radius:8px;border:1px solid rgba(239,68,68,.2);margin-bottom:2rem;display:flex;align-items:center;gap:.5rem}.loading-state[_ngcontent-%COMP%]{text-align:center;padding:4rem 2rem}.loading-spinner[_ngcontent-%COMP%]{font-size:3rem;color:#667eea;margin-bottom:1rem}.ticket-form-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;box-shadow:0 8px 25px #0000001a}.ticket-form[_ngcontent-%COMP%]{width:100%}.form-section[_ngcontent-%COMP%]{margin-bottom:2rem}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1.5rem;color:#374151;font-size:1.3rem;font-weight:600;display:flex;align-items:center;gap:.5rem}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:before{content:"";width:4px;height:1.5rem;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:2px}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-weight:600;color:#374151;margin-bottom:.5rem;font-size:.9rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.required[_ngcontent-%COMP%]{color:#dc2626;font-weight:700}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;border:2px solid #e5e7eb;border-radius:8px;font-size:1rem;transition:all .3s ease;background:#fff;resize:vertical}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-input[_ngcontent-%COMP%]::placeholder, .form-textarea[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.form-dropdown[_ngcontent-%COMP%]{width:100%}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(3,1fr);gap:1.5rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:2rem;padding-top:2rem;border-top:1px solid #e5e7eb}.action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.875rem 1.5rem;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease;font-size:.9rem}.action-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.action-btn.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.action-btn.primary[_ngcontent-%COMP%]:hover{box-shadow:0 8px 25px #667eea4d}.action-btn.primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;background:#9ca3af;transform:none}.action-btn.secondary[_ngcontent-%COMP%]{background:#6b7280;color:#fff}.chat-toggle[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:2rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:1rem 1.5rem;border-radius:50px;box-shadow:0 4px 12px #0003;cursor:pointer;transition:all .3s ease;z-index:1000;display:flex;align-items:center;gap:.5rem;font-weight:600}.chat-toggle[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.chat-panel[_ngcontent-%COMP%]{position:fixed;top:0;right:0;width:400px;height:100vh;background:#fff;box-shadow:-4px 0 20px #00000026;transform:translate(100%);transition:transform .3s ease;z-index:1001;display:flex;flex-direction:column}.chat-panel.open[_ngcontent-%COMP%]{transform:translate(0)}.chat-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1rem 1.5rem;display:flex;justify-content:space-between;align-items:center;font-weight:600}.chat-close[_ngcontent-%COMP%]{background:none;border:none;color:#fff;cursor:pointer;padding:.5rem;border-radius:50%}.chat-content[_ngcontent-%COMP%]{flex:1}.chat-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;opacity:0;visibility:hidden;transition:all .3s ease;z-index:1000}.chat-overlay.active[_ngcontent-%COMP%]{opacity:1;visibility:visible}@media (max-width: 900px){.ticket-edit-main[_ngcontent-%COMP%]{padding:1rem}.ticket-form-card[_ngcontent-%COMP%]{padding:1.5rem;border-radius:12px}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.action-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.chat-panel[_ngcontent-%COMP%]{width:100%}.chat-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}']})};export{H as TicketEditComponent};
