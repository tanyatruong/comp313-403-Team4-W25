import{a as Y}from"./chunk-MSLL6LOD.js";import{i as z,l as L,n as j,o as A}from"./chunk-UZ33E2QP.js";import{b as H,c as G,e as U}from"./chunk-YCHOBINP.js";import{$ as x,A as u,Aa as b,K as T,M as c,N as w,Ua as O,W as y,Y as l,Ya as V,ba as i,ca as o,da as k,ha as S,ia as h,ja as s,jb as P,lb as W,mb as N,nb as F,ob as D,pb as q,qa as M,qb as B,ra as p,rb as R,sa as E,v,va as g,vb as J,wa as f,xa as _,z as m,za as I}from"./chunk-WZJY7RPV.js";var C=()=>({width:"100%"});function Q(a,d){if(a&1&&(i(0,"div",7)(1,"div",8),p(2),o()()),a&2){let n=s();c(2),E(n.errorMessage)}}function X(a,d){a&1&&(i(0,"div",9),k(1,"i",10),i(2,"p"),p(3,"Loading ticket details..."),o()())}function Z(a,d){if(a&1){let n=S();i(0,"form",11,0),h("ngSubmit",function(){m(n);let e=s();return u(e.saveTicket())}),i(2,"div",12)(3,"label",13),p(4,"Title"),o(),i(5,"input",14),_("ngModelChange",function(e){m(n);let r=s();return f(r.ticket.title,e)||(r.ticket.title=e),u(e)}),o()(),i(6,"div",12)(7,"label",15),p(8,"Description"),o(),i(9,"textarea",16),_("ngModelChange",function(e){m(n);let r=s();return f(r.ticket.description,e)||(r.ticket.description=e),u(e)}),o()(),i(10,"div",12)(11,"label",17),p(12,"Status"),o(),i(13,"p-dropdown",18),_("ngModelChange",function(e){m(n);let r=s();return f(r.ticket.status,e)||(r.ticket.status=e),u(e)}),o()(),i(14,"div",12)(15,"label",19),p(16,"Priority"),o(),i(17,"p-dropdown",20),_("ngModelChange",function(e){m(n);let r=s();return f(r.ticket.priority,e)||(r.ticket.priority=e),u(e)}),o()(),i(18,"div",12)(19,"label",21),p(20,"Category"),o(),i(21,"p-dropdown",22),_("ngModelChange",function(e){m(n);let r=s();return f(r.ticket.category,e)||(r.ticket.category=e),u(e)}),o()(),i(22,"div",23)(23,"button",24),h("click",function(){m(n);let e=s();return u(e.cancel())}),o(),k(24,"button",25),o()()}if(a&2){let n=M(1),t=s();c(5),g("ngModel",t.ticket.title),c(4),g("ngModel",t.ticket.description),c(4),x(b(15,C)),l("options",t.statusOptions),g("ngModel",t.ticket.status),c(4),x(b(16,C)),l("options",t.priorityOptions),g("ngModel",t.ticket.priority),c(4),x(b(17,C)),l("options",t.categoryOptions),g("ngModel",t.ticket.category),c(3),l("disabled",!n.valid)}}function $(a,d){a&1&&(i(0,"div",26),k(1,"iframe",27),o())}var K=class a{constructor(d,n){this.ticketService=d;this.routerService=n}ticket=null;statusOptions=H;priorityOptions=G;categoryOptions=U;errorMessage="";showChatbot=!1;ngOnInit(){this.ticket=this.ticketService.currentTicket,this.ticket||(this.errorMessage="No ticket selected for editing",setTimeout(()=>this.routerService.navigateToHome(),2e3))}saveTicket(){if(!this.ticket){this.errorMessage="No ticket to save";return}this.ticketService.updateTicket(this.ticket.id,this.ticket).subscribe(d=>{console.log("Ticket updated successfully",d),this.routerService.navigateToHome()},d=>{console.error("Error updating ticket:",d),this.errorMessage="Failed to update ticket"})}cancel(){this.routerService.navigateToHome()}static \u0275fac=function(n){return new(n||a)(w(Y),w(J))};static \u0275cmp=v({type:a,selectors:[["app-ticket-edit"]],standalone:!0,features:[I],decls:9,vars:4,consts:[["ticketForm","ngForm"],[1,"surface-card","shadow-2","border-round","my-5","mx-6","p-4"],["class","p-message p-message-error mb-3",4,"ngIf"],["class","p-4 text-center",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],[2,"position","fixed","bottom","25px","right","25px","z-index","1000","background-color","#6C63FF","color","white","border","none","padding","16px 20px","font-size","16px","border-radius","50px","box-shadow","0 4px 8px rgba(0,0,0,0.2)","cursor","pointer",3,"click"],["style",`
  position: fixed;
  bottom: 90px;
  right: 25px;
  width: 400px;
  height: 600px;
  z-index: 999;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  border-radius: 10px;
  overflow: hidden;
  background: white;
`,4,"ngIf"],[1,"p-message","p-message-error","mb-3"],[1,"p-message-text"],[1,"p-4","text-center"],[1,"pi","pi-spin","pi-spinner",2,"font-size","2rem"],[3,"ngSubmit"],[1,"field","mb-4"],["for","title",1,"block","font-medium","mb-2"],["id","title","type","text","pInputText","","name","title","required","",1,"w-full",3,"ngModelChange","ngModel"],["for","description",1,"block","font-medium","mb-2"],["id","description","pInputTextarea","","rows","5","name","description","required","",1,"w-full",3,"ngModelChange","ngModel"],["for","status",1,"block","font-medium","mb-2"],["id","status","optionLabel","label","optionValue","value","name","status","required","",3,"ngModelChange","options","ngModel"],["for","priority",1,"block","font-medium","mb-2"],["id","priority","name","priority","required","",3,"ngModelChange","options","ngModel"],["for","category",1,"block","font-medium","mb-2"],["id","category","name","category","required","",3,"ngModelChange","options","ngModel"],[1,"flex","justify-content-end","mt-4"],["pButton","","type","button","label","Cancel","icon","pi pi-times",1,"p-button-outlined","p-button-secondary","mr-2",3,"click"],["pButton","","type","submit","label","Save","icon","pi pi-check",3,"disabled"],[2,"position","fixed","bottom","90px","right","25px","width","400px","height","600px","z-index","999","box-shadow","0 4px 12px rgba(0,0,0,0.3)","border-radius","10px","overflow","hidden","background","white"],["width","100%","height","100%","allow","microphone *","src",T`https://www.gptbots.ai/widget/eeq5jnc8zz3glsfgnw7t8mq/chat.html`,2,"border","none"]],template:function(n,t){n&1&&(i(0,"div",1)(1,"h2"),p(2,"Edit Ticket"),o(),y(3,Q,3,1,"div",2)(4,X,4,0,"div",3)(5,Z,25,18,"form",4),i(6,"div",5),h("click",function(){return t.showChatbot=!t.showChatbot}),p(7,`
\u{1F4AC} Chat
`),o(),y(8,$,2,0,"div",6),o()),n&2&&(c(3),l("ngIf",t.errorMessage),c(),l("ngIf",!t.ticket),c(),l("ngIf",t.ticket),c(3),l("ngIf",t.showChatbot))},dependencies:[V,O,R,q,P,W,N,B,D,F,A,z,L,j],styles:[".field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:500;color:#495057}.p-message-error[_ngcontent-%COMP%]{background-color:#ffcdd2;color:#c63737;padding:.75rem;border-radius:4px;margin-bottom:1rem}"]})};export{K as TicketEditComponent};
