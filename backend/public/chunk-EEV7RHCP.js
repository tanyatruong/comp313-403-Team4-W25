import{a as D}from"./chunk-67QVLPMA.js";import{a as R}from"./chunk-JQHXXQP4.js";import{k as q,n as B}from"./chunk-XNOVGIWT.js";import{b as W,c as F,e as j}from"./chunk-YCHOBINP.js";import{A as l,K as M,M as m,N as b,Y as g,Ya as v,_,ba as e,ca as i,da as d,ha as y,ia as p,kb as T,mb as S,nb as x,ob as V,pb as E,qa as O,qb as I,ra as n,rb as N,sb as z,v as w,va as u,wa as h,xa as C,xb as L,z as c,za as P}from"./chunk-6TMHBXNU.js";var U=class k{constructor(a,f,t){this.routerService=a;this.ticketService=f;this.userService=t}newTicket={title:"",description:"",category:"General",priority:"Medium"};categoryOptions=j;priorityOptions=F;statusOptions=W;errorMessage=null;showChatbot=!1;ngOnInit(){let a=this.userService.getLoggedInUser();a&&(this.newTicket.employeeNumber=a.employeeNumber||"",this.newTicket.userId=a._id?parseInt(a._id,10):0)}onSubmit(){this.validateForm()&&this.submitTicket()}validateForm(){return!!(this.newTicket.title&&this.newTicket.description&&this.newTicket.category&&this.newTicket.priority)}goBack(){this.routerService.navigateToHome()}onReturnButtonClick(){this.goBack()}onDiscardButtonClick(){this.goBack()}onCompleteTicketCreationButtonClick(){this.onSubmit()}submitTicket(){if(!this.newTicket){this.errorMessage="No ticket to save";return}console.log("Creating ticket:",this.newTicket),this.ticketService.createTicket(this.newTicket).subscribe(a=>{console.log("Ticket created successfully",a),this.routerService.navigateToHome()},a=>{console.error("Error creating ticket:",a),this.errorMessage="Failed to create ticket"})}static \u0275fac=function(f){return new(f||k)(b(L),b(R),b(D))};static \u0275cmp=w({type:k,selectors:[["app-ticket-create"]],standalone:!0,features:[P],decls:67,vars:13,consts:[["ticketForm","ngForm"],[1,"ticket-create-container"],[1,"ticket-create-header"],[1,"header-content"],[1,"header-left"],[1,"back-btn",3,"click"],[1,"pi","pi-arrow-left"],[1,"header-title"],[1,"ticket-create-main"],[1,"ticket-form-card"],[1,"ticket-form",3,"ngSubmit"],[1,"form-section"],[1,"form-group"],["for","title"],[1,"pi","pi-bookmark"],[1,"required"],["id","title","type","text","name","title","required","","placeholder","Enter a clear, descriptive subject",1,"form-input",3,"ngModelChange","ngModel"],["for","description"],[1,"pi","pi-file-edit"],["id","description","name","description","required","","rows","5","placeholder","Provide detailed information about your issue, including steps to reproduce if applicable",1,"form-textarea",3,"ngModelChange","ngModel"],[1,"form-grid"],["for","category"],[1,"pi","pi-tag"],["id","category","name","category","placeholder","Select category","optionLabel","label","optionValue","value",1,"form-dropdown",3,"ngModelChange","options","ngModel","required"],["for","priority"],[1,"pi","pi-exclamation-triangle"],["id","priority","name","priority","placeholder","Select priority","optionLabel","label","optionValue","value",1,"form-dropdown",3,"ngModelChange","options","ngModel","required"],[1,"form-actions"],["type","button",1,"action-btn","secondary",3,"click"],[1,"pi","pi-times"],["type","submit",1,"action-btn","primary",3,"disabled"],[1,"pi","pi-check"],[1,"chat-toggle",3,"click"],[1,"pi","pi-comments"],[1,"chat-panel"],[1,"chat-header"],[1,"chat-close",3,"click"],[1,"chat-content"],["width","100%","height","100%","allow","microphone *","src",M`https://www.gptbots.ai/widget/eeq5jnc8zz3glsfgnw7t8mq/chat.html`,"frameborder","0"],[1,"chat-overlay",3,"click"]],template:function(f,t){if(f&1){let o=y();e(0,"div",1)(1,"header",2)(2,"div",3)(3,"div",4)(4,"button",5),p("click",function(){return c(o),l(t.goBack())}),d(5,"i",6),i(),e(6,"div",7)(7,"h1"),n(8,"Create New Ticket"),i(),e(9,"span"),n(10,"Submit a new support request"),i()()()()(),e(11,"main",8)(12,"div",9)(13,"form",10,0),p("ngSubmit",function(){return c(o),l(t.onSubmit())}),e(15,"div",11)(16,"h3"),n(17,"Ticket Information"),i(),e(18,"div",12)(19,"label",13),d(20,"i",14),n(21," Subject "),e(22,"span",15),n(23,"*"),i()(),e(24,"input",16),C("ngModelChange",function(r){return c(o),h(t.newTicket.title,r)||(t.newTicket.title=r),l(r)}),i()(),e(25,"div",12)(26,"label",17),d(27,"i",18),n(28," Description "),e(29,"span",15),n(30,"*"),i()(),e(31,"textarea",19),C("ngModelChange",function(r){return c(o),h(t.newTicket.description,r)||(t.newTicket.description=r),l(r)}),i()(),e(32,"div",20)(33,"div",12)(34,"label",21),d(35,"i",22),n(36," Category "),e(37,"span",15),n(38,"*"),i()(),e(39,"p-dropdown",23),C("ngModelChange",function(r){return c(o),h(t.newTicket.category,r)||(t.newTicket.category=r),l(r)}),i()(),e(40,"div",12)(41,"label",24),d(42,"i",25),n(43," Priority "),e(44,"span",15),n(45,"*"),i()(),e(46,"p-dropdown",26),C("ngModelChange",function(r){return c(o),h(t.newTicket.priority,r)||(t.newTicket.priority=r),l(r)}),i()()()(),e(47,"div",27)(48,"button",28),p("click",function(){return c(o),l(t.goBack())}),d(49,"i",29),n(50," Cancel "),i(),e(51,"button",30),d(52,"i",31),n(53," Submit Ticket "),i()()()()(),e(54,"button",32),p("click",function(){return c(o),l(t.showChatbot=!t.showChatbot)}),d(55,"i",33),e(56,"span"),n(57,"Need Help?"),i()(),e(58,"div",34)(59,"div",35)(60,"span"),n(61,"Support Chat"),i(),e(62,"button",36),p("click",function(){return c(o),l(t.showChatbot=!1)}),d(63,"i",29),i()(),e(64,"div",37),d(65,"iframe",38),i()(),e(66,"div",39),p("click",function(){return c(o),l(t.showChatbot=!1)}),i()()}if(f&2){let o=O(14);m(24),u("ngModel",t.newTicket.title),m(7),u("ngModel",t.newTicket.description),m(8),g("options",t.categoryOptions),u("ngModel",t.newTicket.category),g("required",!0),m(7),g("options",t.priorityOptions),u("ngModel",t.newTicket.priority),g("required",!0),m(5),g("disabled",!o.form.valid),m(7),_("open",t.showChatbot),m(8),_("active",t.showChatbot)}},dependencies:[v,z,I,T,S,x,N,E,V,B,q],styles:['[_nghost-%COMP%]{display:block;min-height:100vh;background:linear-gradient(135deg,#f5f7fa,#c3cfe2)}.ticket-create-container[_ngcontent-%COMP%]{min-height:100vh;display:flex;flex-direction:column}.ticket-create-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1rem 2rem;box-shadow:0 4px 6px #0000001a}.header-content[_ngcontent-%COMP%]{display:flex;align-items:center;max-width:1200px;margin:0 auto}.header-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.back-btn[_ngcontent-%COMP%]{background:none;border:none;color:#fff;cursor:pointer;padding:.75rem;border-radius:50%;transition:background .3s ease}.back-btn[_ngcontent-%COMP%]:hover{background:#ffffff1a}.header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:1.8rem;font-weight:700}.header-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:.9rem;opacity:.8}.ticket-create-main[_ngcontent-%COMP%]{flex:1;padding:2rem;max-width:800px;margin:0 auto;width:100%}.ticket-form-card[_ngcontent-%COMP%]{background:#fff;border-radius:16px;padding:2rem;box-shadow:0 8px 25px #0000001a}.ticket-form[_ngcontent-%COMP%]{width:100%}.form-section[_ngcontent-%COMP%]{margin-bottom:2rem}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 1.5rem;color:#374151;font-size:1.3rem;font-weight:600;display:flex;align-items:center;gap:.5rem}.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]:before{content:"";width:4px;height:1.5rem;background:linear-gradient(135deg,#667eea,#764ba2);border-radius:2px}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-weight:600;color:#374151;margin-bottom:.5rem;font-size:.9rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#667eea}.required[_ngcontent-%COMP%]{color:#dc2626;font-weight:700}.form-input[_ngcontent-%COMP%], .form-textarea[_ngcontent-%COMP%]{width:100%;padding:.875rem 1rem;border:2px solid #e5e7eb;border-radius:8px;font-size:1rem;transition:all .3s ease;background:#fff;resize:vertical}.form-input[_ngcontent-%COMP%]:focus, .form-textarea[_ngcontent-%COMP%]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}.form-input[_ngcontent-%COMP%]::placeholder, .form-textarea[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.form-dropdown[_ngcontent-%COMP%]{width:100%}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:1.5rem}.form-actions[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:flex-end;margin-top:2rem;padding-top:2rem;border-top:1px solid #e5e7eb}.action-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;padding:.875rem 1.5rem;border:none;border-radius:8px;font-weight:600;cursor:pointer;transition:all .3s ease;font-size:.9rem}.action-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.action-btn.primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff}.action-btn.primary[_ngcontent-%COMP%]:hover{box-shadow:0 8px 25px #667eea4d}.action-btn.primary[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed;background:#9ca3af;transform:none}.action-btn.secondary[_ngcontent-%COMP%]{background:#6b7280;color:#fff}.chat-toggle[_ngcontent-%COMP%]{position:fixed;bottom:2rem;right:2rem;background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;border:none;padding:1rem 1.5rem;border-radius:50px;box-shadow:0 4px 12px #0003;cursor:pointer;transition:all .3s ease;z-index:1000;display:flex;align-items:center;gap:.5rem;font-weight:600}.chat-toggle[_ngcontent-%COMP%]:hover{transform:translateY(-2px)}.chat-panel[_ngcontent-%COMP%]{position:fixed;top:0;right:0;width:400px;height:100vh;background:#fff;box-shadow:-4px 0 20px #00000026;transform:translate(100%);transition:transform .3s ease;z-index:1001;display:flex;flex-direction:column}.chat-panel.open[_ngcontent-%COMP%]{transform:translate(0)}.chat-header[_ngcontent-%COMP%]{background:linear-gradient(135deg,#667eea,#764ba2);color:#fff;padding:1rem 1.5rem;display:flex;justify-content:space-between;align-items:center;font-weight:600}.chat-close[_ngcontent-%COMP%]{background:none;border:none;color:#fff;cursor:pointer;padding:.5rem;border-radius:50%}.chat-content[_ngcontent-%COMP%]{flex:1}.chat-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background:#00000080;opacity:0;visibility:hidden;transition:all .3s ease;z-index:1000}.chat-overlay.active[_ngcontent-%COMP%]{opacity:1;visibility:visible}@media (max-width: 768px){.ticket-create-main[_ngcontent-%COMP%]{padding:1rem}.ticket-form-card[_ngcontent-%COMP%]{padding:1.5rem;border-radius:12px}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.action-btn[_ngcontent-%COMP%]{width:100%;justify-content:center}.header-title[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.chat-panel[_ngcontent-%COMP%]{width:100%}.chat-toggle[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:none}}@media (max-width: 480px){.form-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem}.form-grid[_ngcontent-%COMP%]{gap:1rem}}']})};export{U as TicketCreateComponent};
