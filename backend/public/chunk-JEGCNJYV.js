import{a as A}from"./chunk-5QXS5R2B.js";import{a as z}from"./chunk-MSLL6LOD.js";import{i as W,l as D,n as q,o as R}from"./chunk-UZ33E2QP.js";import{b as j,c as L,e as U}from"./chunk-YCHOBINP.js";import{A as l,K as T,M as p,N as k,Ua as M,W as y,Y as d,Ya as x,ba as o,ca as t,da as h,ha as _,ia as u,jb as O,lb as P,mb as V,nb as E,ob as I,pb as B,qa as v,qb as N,ra as s,rb as F,v as C,va as g,vb as G,wa as f,xa as w,z as a,za as S}from"./chunk-WZJY7RPV.js";function Y(b,r){b&1&&(o(0,"div",20),h(1,"iframe",21),t())}var H=class b{constructor(r,m,e){this.routerService=r;this.ticketService=m;this.userService=e}newTicket={title:"",description:"",category:"General",priority:"Medium"};categoryOptions=U;priorityOptions=L;statusOptions=j;errorMessage=null;showChatbot=!1;ngOnInit(){let r=this.userService.getLoggedInUser();r&&(this.newTicket.employeeNumber=r.employeeNumber||"",this.newTicket.userId=r._id?parseInt(r._id,10):0)}onSubmit(){this.validateForm()&&this.submitTicket()}validateForm(){return!!(this.newTicket.title&&this.newTicket.description&&this.newTicket.category&&this.newTicket.priority)}goBack(){this.routerService.navigateToHome()}onReturnButtonClick(){this.goBack()}onDiscardButtonClick(){this.goBack()}onCompleteTicketCreationButtonClick(){this.onSubmit()}submitTicket(){if(!this.newTicket){this.errorMessage="No ticket to save";return}console.log("Creating ticket:",this.newTicket),this.ticketService.createTicket(this.newTicket).subscribe(r=>{console.log("Ticket created successfully",r),this.routerService.navigateToHome()},r=>{console.error("Error creating ticket:",r),this.errorMessage="Failed to create ticket"})}static \u0275fac=function(m){return new(m||b)(k(G),k(z),k(A))};static \u0275cmp=C({type:b,selectors:[["app-ticket-create"]],standalone:!0,features:[S],decls:29,vars:10,consts:[["ticketForm","ngForm"],[1,"surface-card","shadow-2","border-round","my-5","mx-6","p-4"],[1,"flex","justify-content-between","align-items-center","mb-4"],[1,"text-2xl","font-bold"],["pButton","","label","Back","icon","pi pi-arrow-left",1,"p-button-outlined",3,"click"],[1,"p-fluid",3,"ngSubmit"],[1,"field","mb-4"],["for","title",1,"font-bold","block","mb-2"],["id","title","type","text","pInputText","","name","title","required","","placeholder","Enter a descriptive subject",1,"w-full","p-inputtext",3,"ngModelChange","ngModel"],["for","description",1,"font-bold","block","mb-2"],["id","description","pInputTextarea","","name","description","required","","rows","5","placeholder","Provide details about your issue",1,"w-full",3,"ngModelChange","ngModel"],["for","category",1,"font-bold","block","mb-2"],["id","category","name","category","placeholder","Select a category","optionLabel","label","optionValue","value",1,"w-full",3,"ngModelChange","options","ngModel","required"],["for","priority",1,"font-bold","block","mb-2"],["id","priority","name","priority","placeholder","Select priority level","optionLabel","label","optionValue","value",1,"w-full",3,"ngModelChange","options","ngModel","required"],[1,"flex","justify-content-end","mt-4"],["pButton","","type","button","label","Cancel",1,"p-button-outlined","p-button-secondary","mr-2",3,"click"],["pButton","","type","submit","label","Submit Ticket","icon","pi pi-check",3,"disabled"],[2,"position","fixed","bottom","25px","right","25px","z-index","1000","background-color","#6C63FF","color","white","border","none","padding","16px 20px","font-size","16px","border-radius","50px","box-shadow","0 4px 8px rgba(0,0,0,0.2)","cursor","pointer",3,"click"],["style",`
  position: fixed;
  bottom: 90px;
  right: 25px;
  width: 400px;
  height: 600px;
  z-index: 999;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  border-radius: 10px;
  overflow: hidden;
  background: white;
`,4,"ngIf"],[2,"position","fixed","bottom","90px","right","25px","width","400px","height","600px","z-index","999","box-shadow","0 4px 12px rgba(0,0,0,0.3)","border-radius","10px","overflow","hidden","background","white"],["width","100%","height","100%","allow","microphone *","src",T`https://www.gptbots.ai/widget/eeq5jnc8zz3glsfgnw7t8mq/chat.html`,2,"border","none"]],template:function(m,e){if(m&1){let n=_();o(0,"div",1)(1,"div",2)(2,"h1",3),s(3,"Create New Ticket"),t(),o(4,"button",4),u("click",function(){return a(n),l(e.goBack())}),t()(),o(5,"form",5,0),u("ngSubmit",function(){return a(n),l(e.onSubmit())}),o(7,"div",6)(8,"label",7),s(9,"Subject *"),t(),o(10,"input",8),w("ngModelChange",function(i){return a(n),f(e.newTicket.title,i)||(e.newTicket.title=i),l(i)}),t()(),o(11,"div",6)(12,"label",9),s(13,"Description *"),t(),o(14,"textarea",10),w("ngModelChange",function(i){return a(n),f(e.newTicket.description,i)||(e.newTicket.description=i),l(i)}),t()(),o(15,"div",6)(16,"label",11),s(17,"Category *"),t(),o(18,"p-dropdown",12),w("ngModelChange",function(i){return a(n),f(e.newTicket.category,i)||(e.newTicket.category=i),l(i)}),t()(),o(19,"div",6)(20,"label",13),s(21,"Priority *"),t(),o(22,"p-dropdown",14),w("ngModelChange",function(i){return a(n),f(e.newTicket.priority,i)||(e.newTicket.priority=i),l(i)}),t()(),o(23,"div",15)(24,"button",16),u("click",function(){return a(n),l(e.goBack())}),t(),h(25,"button",17),t()(),o(26,"div",18),u("click",function(){return a(n),l(e.showChatbot=!e.showChatbot)}),s(27,`
\u{1F4AC} Chat
`),t(),y(28,Y,2,0,"div",19),t()}if(m&2){let n=v(6);p(10),g("ngModel",e.newTicket.title),p(4),g("ngModel",e.newTicket.description),p(4),d("options",e.categoryOptions),g("ngModel",e.newTicket.category),d("required",!0),p(4),d("options",e.priorityOptions),g("ngModel",e.newTicket.priority),d("required",!0),p(3),d("disabled",!n.form.valid),p(3),d("ngIf",e.showChatbot)}},dependencies:[x,M,F,B,O,P,V,N,I,E,R,W,D,q],styles:['.field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:#495057}.field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:.75rem;border-radius:6px}[_nghost-%COMP%]     .p-dropdown{border-radius:6px}[_nghost-%COMP%]     .p-button{border-radius:6px}.required-field[_ngcontent-%COMP%]:after{content:"*";color:red;margin-left:4px}']})};export{H as TicketCreateComponent};
