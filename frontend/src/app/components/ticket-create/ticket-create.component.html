<!-- Modern Ticket Creation Page -->
<div class="ticket-create-container">
  <!-- Header Section -->
  <header class="ticket-create-header">
    <div class="header-content">
      <div class="header-left">
        <button class="back-btn" (click)="goBack()">
          <i class="pi pi-arrow-left"></i>
        </button>
        <div class="header-title">
          <h1>Create New Ticket</h1>
          <span>Submit a new support request</span>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="ticket-create-main">
    <div class="ticket-form-card">
      <form (ngSubmit)="onSubmit()" #ticketForm="ngForm" class="ticket-form">
        <div class="form-section">
          <h3>Ticket Information</h3>
          
          <div class="form-group">
            <label for="title">
              <i class="pi pi-bookmark"></i>
              Subject
              <span class="required">*</span>
            </label>
            <input 
              id="title" 
              type="text" 
              class="form-input"
              [(ngModel)]="newTicket.title" 
              name="title" 
              required
              placeholder="Enter a clear, descriptive subject"
            >
          </div>

          <div class="form-group">
            <label for="description">
              <i class="pi pi-file-edit"></i>
              Description
              <span class="required">*</span>
            </label>
            <textarea 
              id="description" 
              class="form-textarea"
              [(ngModel)]="newTicket.description" 
              name="description" 
              required 
              rows="5"
              placeholder="Provide detailed information about your issue, including steps to reproduce if applicable"
            ></textarea>
          </div>

          <div class="form-grid">
            <div class="form-group">
              <label for="category">
                <i class="pi pi-tag"></i>
                Category
                <span class="required">*</span>
              </label>
              <p-dropdown 
                id="category" 
                [options]="categoryOptions" 
                [(ngModel)]="newTicket.category" 
                name="category"
                placeholder="Select category" 
                [required]="true" 
                optionLabel="label" 
                optionValue="value"
                class="form-dropdown">
              </p-dropdown>
            </div>

            <div class="form-group">
              <label for="priority">
                <i class="pi pi-exclamation-triangle"></i>
                Priority
                <span class="required">*</span>
              </label>
              <p-dropdown 
                id="priority" 
                [options]="priorityOptions" 
                [(ngModel)]="newTicket.priority" 
                name="priority"
                placeholder="Select priority" 
                [required]="true" 
                optionLabel="label" 
                optionValue="value"
                class="form-dropdown">
              </p-dropdown>
            </div>
          </div>
        </div>

        <div class="form-actions">
          <button 
            type="button" 
            class="action-btn secondary"
            (click)="goBack()">
            <i class="pi pi-times"></i>
            Cancel
          </button>
          <button 
            type="submit" 
            class="action-btn primary"
            [disabled]="!ticketForm.form.valid">
            <i class="pi pi-check"></i>
            Submit Ticket
          </button>
        </div>
      </form>
    </div>
  </main>
  <!-- Floating Chat Button -->
  <button class="chat-toggle" (click)="showChatbot = !showChatbot">
    <i class="pi pi-comments"></i>
    <span>Need Help?</span>
  </button>

  <!-- Chat Panel -->
  <div class="chat-panel" [class.open]="showChatbot">
    <div class="chat-header">
      <span>Support Chat</span>
      <button class="chat-close" (click)="showChatbot = false">
        <i class="pi pi-times"></i>
      </button>
    </div>
    <div class="chat-content">
      <iframe 
        width="100%" 
        height="100%" 
        allow="microphone *" 
        src="https://www.gptbots.ai/widget/eeq5jnc8zz3glsfgnw7t8mq/chat.html"
        frameborder="0">
      </iframe>
    </div>
  </div>

  <!-- Overlay -->
  <div class="chat-overlay" [class.active]="showChatbot" (click)="showChatbot = false"></div>
</div>